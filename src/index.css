@import url("https://fonts.googleapis.com/css2?family=Geist:wght@100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap");
@import "tailwindcss";
@import "tw-animate-css";
@import "./style/theme.css";
@import "./style/font.css";
@import "./style/keyframes.css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --font-roboto: "Roboto", sans-serif;
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-background: var(--background);
  --color-surface: var(--surface);
  --color-border: var(--border);
  --color-primary: var(--primary);
  --color-secondary: var(--secondary);
  --color-dark-secondary: var(--dark-secondary);
  --color-danger: var(--danger);
  --color-primary-text: var(--primary-text);
  --color-secondary-text: var(--secondary-text);
  --color-light-secondary-text: var(--light-secondary-text);
  --color-light-filled-secondary: var(--light-filled-secondary);
  --shadow-left: 0 0.25rem 0.5rem 0.1rem #0003;
  --color-menu-background: var(--menu-background-color);
  --shadow-menu-box-shadow: var(--menu-box-shadow);
}

@layer base {
  body {
    @apply bg-background font-roboto;
  }

  .main-layout {
    @apply w-dvw h-[calc(var(--vh,1vh)*100)] overflow-hidden;
  }

  .layout-inner {
    @apply w-full overflow-hidden relative h-full min-h-full max-h-full;
  }

  .tabs-container {
    @apply min-w-full w-full grid [grid-template-columns:100%] [grid-template-rows:100%];
  }

  .layout-inner.tabs-container {
    @apply w-full flex overflow-hidden relative h-full min-h-full max-h-full;
  }

  .tabs-tab {
    @apply flex flex-col col-start-1 h-full min-h-full max-h-full relative bg-surface;
  }
  /* .tabs-container > .tabs-tab:first-child {
    @apply translate-x-0;
  } */

  .tabs-tab.tab{
    @apply transition-transform duration-200 ease-in-out translate-x-full absolute left-0 right-0;
  }
  .tabs-tab.active{
    @apply translate-x-0 ;
  }
  .tabs-tab .previous-tab{
    @apply -translate-x-20 ;
  }

  .left-column,
  .center-column {
    @apply flex-col 
      h-dvh 
      [flex:var(--current-width)_1_auto] 
      [width:var(--current-width)];
  }
  .left-column {
    @apply w-full 
      max-w-full 
      lg:max-w-[420px] 
      [--current-width:var(--column-left-width,420px)] 
      overflow-hidden
      sm:flex-[2] 
      sm:fixed 
      sm:inset-y-0 
      sm:left-0 
      sm:w-[26.5rem] 
      sm:-translate-x-full 
      sm:data-[state=true]:translate-x-0 
      fixed 
      top-0 
      left-0 
      -translate-x-full 
      data-[state=true]:-translate-x-0 
      lg:relative 
      lg:w-full 
      lg:translate-x-0 
      lg:data-[state=true]:translate-x-0 
      sm:border-r 
      border-border;
  }
  /* Right column */
  .right-column {
    @apply w-full 
      max-w-full 
      lg:max-w-[var(--right-column-width)] 
      sm:h-full 
      md:min-h-full 
      md:max-h-full 
      fixed 
      sm:max-w-[var(--column-left-width)]
      md:absolute 
      z-[3]
      end-0 
      transform 
      lg:translate-x-[var(--right-column-width)] 
      lg:border-l 
      border-border 
      md:flex 
      translate-x-full 
      data-[state=true]:translate-x-0
      sm:shadow-left
      lg:shadow-none;
  }

  /* Main column */
  .center-column {
    @apply fixed 
    flex-1 
      w-full 
      flex 
      flex-col 
      row-start-1 
      col-start-1 
      bg-background 
      h-[calc(var(--vh,1vh)*100)]
      sm:fixed 
      lg:relative 
      data-[left=true]:translate-x-full 
      sm:data-[left=true]:translate-x-[26.5rem] 
      max-sm:translate-x-0 
      data-[right=true]:-translate-x-20 
      md:data-[right=true]:translate-x-0 
      lg:data-[right=true]:w-[calc(100dvw_-_var(--right-column-width)_-_var(--column-left-width))] 
      lg:data-[right=true]:translate-x-0 
      lg:data-[left=true]:translate-x-0 
      z-[2] 
      lg:z-[1]
      overflow-hidden;
  }

  .left-column-inner,
  .right-column-inner {
    @apply h-dvh w-full overflow-hidden;
  }
  .animation-on .left-column,
  .animation-on .center-column,
  .animation-on .right-column {
    @apply transition-all ease-in-out duration-200;
  }

  .sidebar-header {
    @apply bg-surface 
    flex 
    items-center 
    justify-between 
    px-2
    sm:px-4 
      min-h-[3.5rem] 
    shrink-0 
    select-none 
    cursor-default
    w-full;
  }
  .sidebar-header-btn {
    @apply relative w-10 h-10 shrink-0 flex items-center justify-center;
  }
  .sidebar-header-title{
    @apply flex-1 font-medium ps-6 text-xl text-primary-text truncate;
  }
  .animated-menu-icon,
  .animated-menu-icon:before,
  .animated-menu-icon:after {
    @apply w-[1.125rem] h-0.5 rounded-xs bg-secondary-text rotate-0 absolute;
  }
  .animated-menu-icon {
    @apply transition-transform duration-[250ms] before:content-[''] after:content-[''] before:left-0 after:left-0 before:-top-[.3125rem] after:top-[0.3125rem];
  }
  .search-open .animated-menu-icon {
    @apply rotate-180 before:[transform:rotate(45deg)_scaleX(.75)_translate(0.375rem,-0.1875rem)] after:[transform:rotate(-45deg)_scaleX(.75)_translate(0.375rem,0.1875rem)];
  }
  .sidebar-header .search-field {
    @apply relative   outline-0 w-full  h-[38px] rounded-full flex items-center mx-2 transition-all duration-200 ease-in-out border-0 box-border bg-transparent  border-transparent shadow-[0_0_0_1px_var(--border)] focus-within:shadow-[0_0_0_2px_var(--primary)] dark:bg-background dark:focus-within:bg-transparent;
  }
  .sidebar-header .search-field .search-input {
    @apply w-full bg-transparent z-[2] h-full rounded-full px-[calc(40px_+_3px_+_1px)] border-0 outline-0 transition-all duration-100 ease-in-out placeholder:text-dark-secondary;
  }
  .sidebar-header .search-field .search-icon {
    @apply absolute left-3 top-[7px] transition-all duration-200 ease-in-out group-focus-within:text-primary text-2xl text-dark-secondary;
  }
  .sidebar-header .search-field .clear-search-input {
    @apply absolute right-1 aspect-square transition-all duration-200 ease-in-out group-focus-within:text-primary text-2xl text-dark-secondary items-center cursor-pointer z-[6];
  }
  .sidebar-content {
    @apply w-full bg-surface max-h-full h-full overflow-hidden flex relative flex-1 justify-center;
  }
  .transition-item {
    @apply max-h-full top-0 left-0 w-full h-full [animation-fill-mode:forwards!important] bg-surface;
  }

  .transitions > .transition-item:not(.active) {
    @apply hidden;
  }

  /* Zoom-Fade Base States */
  .transitions.zoom-fade > .from {
    transform-origin: center;
    @apply scale-100 opacity-100;
  }

  .transitions.zoom-fade > .to {
    transform-origin: center;
    @apply opacity-0;
  }

  /* Animating Forwards */
  .transitions.zoom-fade.animating > .from {
    animation: fade-out-opacity 0.15s ease;
  }

  .transitions.zoom-fade.animating > .to {
    animation: fade-in-opacity 0.15s ease, zoom-fade-in-move 0.15s ease;
  }

  /* Backwards Base */
  .transitions.zoom-fade.backwards > .from {
    @apply scale-100;
  }

  .transitions.zoom-fade.backwards > .to {
    @apply scale-95;
  }

  /* Animating Backwards */
  .transitions.zoom-fade.backwards.animating > .from {
    animation: fade-in-backwards-opacity 0.1s ease,
      zoom-fade-in-backwards-move 0.15s ease;
  }

  .transitions.zoom-fade.backwards.animating > .to {
    animation: fade-out-backwards-opacity 0.15s ease,
      zoom-fade-out-backwards-move 0.15s ease;
  }

  /* dropdown menu */

  .dropdown-trigger {
    @apply relative flex  items-center gap-2 rounded-[.3125rem] mx-1.5  leading-4 text-start h-8 cursor-pointer px-3 py-1 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8;
  }

  .dropdown-content {
    @apply min-w-52 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-[calc(var(--radix-dropdown-menu-content-available-height)_-_14px)]  origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-[10px] border-0 py-1.5 ;
  }
  .dropdown-item {
    @apply focus:bg-light-secondary-text  relative flex  items-center gap-2 rounded-[.3125rem] mx-1.5  leading-4 text-start h-8 cursor-pointer px-3 py-1 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8;
  }

  .dropdown-subcontent {
    @apply min-w-52  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-[calc(var(--radix-dropdown-menu-content-available-height)_-_14px)]  origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-[10px] border-0 py-1.5  transition-(--menu-transition) duration-200;
  }

  .chat-container {
    @apply h-full;
  }

  .chat-container .chats {
    @apply flex w-full flex-col items-center transition-all duration-200 ease-in-out lg:data-[right=true]:w-[calc(100dvw_-_var(--right-column-width)_-_var(--column-left-width))];
  }
  .chat-info-container .state-back {
    @apply  lg:!hidden flex;
  }
  input{
    @apply caret-primary text-primary-text
  }
}